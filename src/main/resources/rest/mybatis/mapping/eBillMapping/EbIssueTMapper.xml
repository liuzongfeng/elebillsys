<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="rest.mybatis.dao.eBillDao.EbIssueTMapper" >
  <resultMap id="BaseResultMap" type="rest.mybatis.model.eBillModel.EbIssueT" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 22 14:09:36 CST 2017.
    -->
    <id column="ID" property="id" jdbcType="VARCHAR" />
    <result column="ISSUE_NAME" property="issueName" jdbcType="VARCHAR" />
    <result column="ISSUE_STATE" property="issueState" jdbcType="INTEGER" />
    <result column="BILL_STATE" property="billState" jdbcType="INTEGER" />
    <result column="ISSUE_START_DATE" property="issueStartDate" jdbcType="TIMESTAMP" javaType="java.sql.Date"/>
    <result column="ISSUE_END_DATE" property="issueEndDate" jdbcType="TIMESTAMP" javaType="java.sql.Date"/>
    <result column="ISSUE_OPERATER" property="issueOperater" jdbcType="INTEGER" />
    <result column="ISSUE_OPERATE_DATE" property="issueOperateDate" jdbcType="TIMESTAMP" javaType="java.sql.Date"/>
    <result column="ISSUE_IS_LIVE" property="issueIsLive" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 22 14:09:36 CST 2017.
    -->
    ID, ISSUE_NAME, ISSUE_STATE,BILL_STATE, ISSUE_START_DATE, ISSUE_END_DATE, ISSUE_OPERATER, ISSUE_OPERATE_DATE, 
    ISSUE_IS_LIVE
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 22 14:09:36 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from EB_ISSUE_T
    where ISSUE_IS_LIVE = 1 and ID = #{id,jdbcType=VARCHAR}
  </select>
  <select id="searchUnClosed" resultMap="BaseResultMap"  >
    
    select 
    <include refid="Base_Column_List" />
    from EB_ISSUE_T
    where ISSUE_IS_LIVE = 1 and ISSUE_STATE != 2
  </select>
  <!-- 查询期数list -->
  <select id="selectIssueList" resultMap="BaseResultMap"  >
    
    select 
    <include refid="Base_Column_List" />
    from EB_ISSUE_T
    where ISSUE_IS_LIVE = 1
    order by ISSUE_OPERATE_DATE desc
  </select>
  <!-- 根据参数查询期数 -->
  <select id="queryIssueByMap" resultMap="BaseResultMap"  >
    select 
    <include refid="Base_Column_List" />
    from EB_ISSUE_T
    <where>
    	ISSUE_IS_LIVE = 1
    	<if test="issueName != null">
    	 	AND ISSUE_NAME LIKE CONCAT(CONCAT('%',#{issueName}),'%')
    	</if>
    	<if test="issueState != null">
    		AND ISSUE_STATE = #{issueState,jdbcType=INTEGER}
    	</if>
    	
    </where> 
    order by ISSUE_OPERATE_DATE desc
  </select>
  
  <!-- 分页查询期数list -->
  <select id="queryListByPage" resultMap="BaseResultMap"  >
    select 
    <include refid="Base_Column_List" />
    from EB_ISSUE_T
    <where>
    	ISSUE_IS_LIVE = 1
    	<if test="searchParam != null">
    	 	AND ISSUE_NAME LIKE CONCAT(CONCAT('%',#{searchParam}),'%')
    	</if>
    	
    </where> 
    order by ISSUE_OPERATE_DATE desc
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 22 14:09:36 CST 2017.
    -->
    delete from EB_ISSUE_T
    where ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="rest.mybatis.model.eBillModel.EbIssueT" >
    
    <selectKey keyProperty="id" keyColumn="ID" order="BEFORE" resultType="java.lang.String">
    	select replace(uuid(),'-','') from dual 
    </selectKey>
    insert into EB_ISSUE_T (ID, ISSUE_NAME, ISSUE_STATE, BILL_STATE,
      ISSUE_START_DATE, ISSUE_END_DATE, ISSUE_OPERATER, 
      ISSUE_OPERATE_DATE, ISSUE_IS_LIVE)
    values (#{id,jdbcType=VARCHAR}, #{issueName,jdbcType=VARCHAR}, #{issueState,jdbcType=INTEGER},#{billState,jdbcType=INTEGER}, 
      #{issueStartDate,jdbcType=TIMESTAMP}, #{issueEndDate,jdbcType=TIMESTAMP}, #{issueOperater,jdbcType=INTEGER}, 
      #{issueOperateDate,jdbcType=TIMESTAMP}, #{issueIsLive,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="rest.mybatis.model.eBillModel.EbIssueT" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 22 14:09:36 CST 2017.
    -->
    insert into EB_ISSUE_T
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        ID,
      </if>
      <if test="issueName != null" >
        ISSUE_NAME,
      </if>
      <if test="issueState != null" >
        ISSUE_STATE,
      </if>
      <if test="billState != null" >
        BILL_STATE,
      </if>
      <if test="issueStartDate != null" >
        ISSUE_START_DATE,
      </if>
      <if test="issueEndDate != null" >
        ISSUE_END_DATE,
      </if>
      <if test="issueOperater != null" >
        ISSUE_OPERATER,
      </if>
      <if test="issueOperateDate != null" >
        ISSUE_OPERATE_DATE,
      </if>
      <if test="issueIsLive != null" >
        ISSUE_IS_LIVE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="issueName != null" >
        #{issueName,jdbcType=VARCHAR},
      </if>
      <if test="issueState != null" >
        #{issueState,jdbcType=INTEGER},
      </if>
      <if test="billState != null" >
        #{billState,jdbcType=INTEGER},
      </if>
      <if test="issueStartDate != null" >
        #{issueStartDate,jdbcType=TIMESTAMP},
      </if>
      
      <if test="issueEndDate != null" >
        #{issueEndDate,jdbcType=TIMESTAMP},
      </if>
      <if test="issueOperater != null" >
        #{issueOperater,jdbcType=INTEGER},
      </if>
      <if test="issueOperateDate != null" >
        #{issueOperateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="issueIsLive != null" >
        #{issueIsLive,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="rest.mybatis.model.eBillModel.EbIssueT" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 22 14:09:36 CST 2017.
    -->
    update EB_ISSUE_T
    <set >
      <if test="issueName != null" >
        ISSUE_NAME = #{issueName,jdbcType=VARCHAR},
      </if>
      <if test="issueState != null" >
        ISSUE_STATE = #{issueState,jdbcType=INTEGER},
      </if>
      <if test="billState != null" >
        BILL_STATE = #{billState,jdbcType=INTEGER},
      </if>
      <if test="issueStartDate != null" >
        ISSUE_START_DATE = #{issueStartDate,jdbcType=TIMESTAMP},
      </if>
      <if test="issueEndDate != null" >
        ISSUE_END_DATE = #{issueEndDate,jdbcType=TIMESTAMP},
      </if>
      <if test="issueOperater != null" >
        ISSUE_OPERATER = #{issueOperater,jdbcType=INTEGER},
      </if>
      <if test="issueOperateDate != null" >
        ISSUE_OPERATE_DATE = #{issueOperateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="issueIsLive != null" >
        ISSUE_IS_LIVE = #{issueIsLive,jdbcType=INTEGER},
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="rest.mybatis.model.eBillModel.EbIssueT" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Sep 22 14:09:36 CST 2017.
    -->
    update EB_ISSUE_T
    set ISSUE_NAME = #{issueName,jdbcType=VARCHAR},
      ISSUE_STATE = #{issueState,jdbcType=INTEGER},
       BILL_STATE = #{billState,jdbcType=INTEGER},
      ISSUE_START_DATE = #{issueStartDate,jdbcType=TIMESTAMP},
      ISSUE_END_DATE = #{issueEndDate,jdbcType=TIMESTAMP},
      ISSUE_OPERATER = #{issueOperater,jdbcType=INTEGER},
      ISSUE_OPERATE_DATE = #{issueOperateDate,jdbcType=TIMESTAMP},
      ISSUE_IS_LIVE = #{issueIsLive,jdbcType=INTEGER}
    where ID = #{id,jdbcType=VARCHAR}
  </update>
</mapper>